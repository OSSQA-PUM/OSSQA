@* This component generates result for each category tab*@

<div class="d-flex">
    <a href="https://securityscorecards.dev/#the-checks" style="margin-top:3em; margin-bottom:2em;"> What do these results mean?</a>
</div>

@if (SbomResult != null && SbomResult.Count>0)
{
    <div class="d-flex flex-wrap justify-content-evenly">
        @foreach (var test in Tests)
        {
            <div style=" min-width:0.3vw;">
                <h3 class="d-flex justify-content-center" style="margin-bottom:1em;">@test</h3>
                
                @if (SbomResult.ContainsKey(test))
                {
                    List<SbomAnalysis.Check> values = SbomResult[test];
                    values.Sort((x, y) => x.score.CompareTo(y.score));
                    int count = 0;
                    <MatList>
                    @foreach (var check in values)
                    {
                        count++;
                        if(check.dependency.name != null)
                        {
                            var url = $"https://{check.dependency.name}";
                                
                            <MatListItem>
                                    <h5 style="margin-right:1em;">Score: @check.score/10 </h5>
                            </MatListItem>
                            <MatListItem>
                                    Component URL: <a style="margin-left:1em;" href="@url">@check.dependency.name</a>
                            </MatListItem>
                            <MatListItem>
                                Reason: @check.reason
                            </MatListItem>
                            <MatListDivider></MatListDivider>
                           
                        }
                    }
                    </MatList>
                }
            </div>
        }
    </div>

}


@code {
    [Parameter]
    public Dictionary<string, List<SbomAnalysis.Check>> SbomResult { get; set; }
    [Parameter]
    public string[] Tests { get; set; }

}
